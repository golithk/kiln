# =============================================================================
# Kiln Configuration
# =============================================================================
# This file uses KEY=value format. Lines starting with # are comments.
# See https://github.com/agentic-metallurgy/kiln for documentation.

# =============================================================================
# CRITICAL Settings - User Identity
# =============================================================================
# These settings control who can trigger workflows and enable team collaboration.

# Your GitHub username (required)
# SECURITY: Only you can trigger workflows by moving cards on the project board.
# Team members (if configured) can work alongside you without triggering warnings.
USERNAME_SELF=

# =============================================================================
# Team Collaboration (Optional)
# =============================================================================
# Enable multiple users to work on the same project board, each running their
# own kiln instance. Team members' actions are logged silently (DEBUG level),
# while unknown actors still produce warnings.

# Team member usernames (comma-separated, optional)
# These users can work alongside you without triggering warnings in your logs.
# Each team member should run their own kiln instance with their own USERNAME_SELF.
# Example: USERNAMES_TEAM=alice,bob,charlie
# USERNAMES_TEAM=

# =============================================================================
# Required Settings
# =============================================================================

# GitHub project board URLs to monitor (comma-separated)
# Example: https://github.com/orgs/your-org/projects/1 (views are optional)
PROJECT_URLS=

# =============================================================================
# GitHub Authentication
# =============================================================================
# Kiln automatically configures git to use gh CLI for HTTPS authentication.
# Git operations (clone, fetch, push) will use your GitHub token automatically.
# This modifies your global git config to set a credential helper for each
# hostname found in PROJECT_URLS.

# GitHub personal access token (optional)
# If not set, kiln uses credentials from `gh auth login`
# GITHUB_TOKEN=ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# =============================================================================
# GitHub Enterprise Server
# =============================================================================
# Configure these settings to use GitHub Enterprise Server instead of github.com.
#
# IMPORTANT: Kiln operates against EITHER github.com OR GitHub Enterprise Server,
# not both simultaneously. Setting both GITHUB_TOKEN and GITHUB_ENTERPRISE_TOKEN
# will result in a configuration error.

# GitHub Enterprise Server hostname (without protocol)
# Example: github.mycompany.com
# GITHUB_ENTERPRISE_HOST=

# GitHub Enterprise Server personal access token
# Requires a classic PAT with repo and project scopes (same as github.com)
# NOTE: This token is only used when GITHUB_ENTERPRISE_HOST is also set
# GITHUB_ENTERPRISE_TOKEN=

# GitHub Enterprise Server version (e.g., "3.14")
# Required for GHES installations to select the correct API client.
# Different GHES versions have different API capabilities - Kiln uses
# version-specific clients to handle these differences.
# Supported versions: 3.14, 3.15, 3.16, 3.17, 3.18, 3.19
# NOTE: Only set this when using GitHub Enterprise Server.
# GITHUB_ENTERPRISE_VERSION=3.14

# Mask GHES hostname and org name in logs (default: true)
# When enabled, logs show <GHES> and <ORG> instead of actual values.
# Set to false if you need full URLs in logs for debugging.
# GHES_LOGS_MASK=true

# =============================================================================
# Optional Settings
# =============================================================================

# Polling interval in seconds (default: 30)
# POLL_INTERVAL=30

# Maximum concurrent workflows (default: 3)
# MAX_CONCURRENT_WORKFLOWS=3

# Project board statuses to watch (comma-separated)
# Default: Research,Plan,Implement
# WATCHED_STATUSES=Research,Plan,Implement

# Log level: DEBUG, INFO, WARNING, ERROR (default: INFO)
# LOG_LEVEL=INFO

# Claude model overrides per workflow stage (JSON format)
# Default: {"Prepare": "haiku", "Research": "opus", "Plan": "opus", "Implement": "opus"}
# STAGE_MODELS={"Prepare": "haiku", "Research": "sonnet", "Plan": "opus", "Implement": "sonnet"}

# =============================================================================
# Safety Settings
# =============================================================================

# Maximum number of TASKs allowed to be appended during an active implementation run.
# Set to 0 for infinite (no limit). Recommended: 5 for production environments.
# Prevents runaway loops if implementation/user keeps adding new TASKs during execution.
# SAFETY_ALLOW_APPENDED_TASKS=0

# =============================================================================
# Telemetry
# =============================================================================

# OpenTelemetry endpoint for metrics (HTTP OTLP, port 4318)
# OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318

# Service name for telemetry (default: kiln)
# OTEL_SERVICE_NAME=kiln

# Enable Claude Code telemetry (0 or 1, default: 0)
# CLAUDE_CODE_ENABLE_TELEMETRY=0

# =============================================================================
# PagerDuty Notifications
# =============================================================================
# Get notified when kiln enters or exits hibernation mode due to GitHub API
# connectivity issues. Requires a PagerDuty Events API v2 integration key.
#
# To set up:
# 1. Create a new service in PagerDuty (or use an existing one)
# 2. Add an "Events API v2" integration to the service
# 3. Copy the "Integration Key" (32 character routing key)
#
# When configured:
# - Alert triggered when entering hibernation (connectivity lost)
# - Alert auto-resolved when exiting hibernation (connectivity restored)
# - Alerts include project URLs being monitored

# PagerDuty Events API v2 routing key (optional)
# PAGERDUTY_ROUTING_KEY=
